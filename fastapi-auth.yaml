namespace: fastapi-auth
fastapi-auth:
  defines: runnable
  metadata:
    name: fastapi-auth
    description: An example FastAPI application implementing JWT authentication.
    icon: https://emojiapi.dev/api/v1/robot.svg
  containers:
    fastapi-auth:
      build: .
  services:
    api-port:
      container: fastapi-auth
      port: 6060
      host-port: 6060
      publish: false
      protocol: TCP
      description: Port for the API to listen on.
  connections:
    mysql-db:
      target: fastapi-auth/db
      service: monk-mysql-db
  variables:
    expiry:
      env: expiry
      type: int
      description: JWT token expiry time in seconds.
      value: 3600
    app-key:
      env: app_key
      type: string
      description: Application key.
      value: '!!!SETME-USE-SECRETS!!!'
    username:
      env: username
      type: string
      description: MySQL user name
      value: api_db
    password:
      env: password
      type: string
      description: MySQL password
      value: '!!!SETME-USE-SECRETS!!!'
    db:
      env: db
      type: string
      description: MySQL database name
      value: fastapiauth
db:
  defines: runnable
  inherits: monk-mysql/db
stack:
  defines: group
  members:
    - fastapi-auth/fastapi-auth
    - fastapi-auth/db
